{# this extends to all other pages, replacing base.html #}
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover"
    />
    <title>{% block title %}{{ title or "AMS" }}{% endblock %}</title>

    {# CoreUI 5 CSS + Icons #}
    <link href="https://cdn.jsdelivr.net/npm/@coreui/coreui@5.0.0/dist/css/coreui.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/@coreui/icons@3.0.0/css/all.min.css" rel="stylesheet">

    {# Optional: DataTables (Bootstrap 5 skin) if your CoreUI pages need tables #}
    {% block vendor_css %}
    {% endblock %}

    {# Page-level styles #}
    {% block styles %}
    <style>
      /* Mild padding so content isnâ€™t glued to edges */
      .c-main { padding: 1rem; }
      /* Make DataTables headers look nice with CoreUI */
      table.dataTable thead th { vertical-align: middle; }
    </style>
    {% endblock %}
    {% block head_extra %}{% endblock %}
  </head>

  <body>
    <div class="sidebar sidebar-fixed" id="sidebar">
      <div class="sidebar-brand d-none d-md-flex">
        <svg class="sidebar-brand-full" width="118" height="46" role="img" aria-label="AMS">
          <use xlink:href="#"></use>
        </svg>
        <svg class="sidebar-brand-narrow" width="46" height="46" role="img" aria-label="A">
          <use xlink:href="#"></use>
        </svg>
      </div>

      <ul class="sidebar-nav" data-coreui="navigation" data-simplebar>
        {% block sidebar %}
        <li class="nav-item">
          <a class="nav-link" href="{{ url_for('main.menu') }}">
            <i class="nav-icon cil-speedometer"></i> Dashboard
          </a>
        </li>

        <li class="nav-title">Students</li>
        <li class="nav-item">
          <a class="nav-link" href="{{ url_for('main.point_inputs') }}">
            <i class="nav-icon cil-people"></i> Student List
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="{{ url_for('main.point_inputs') }}">
            <i class="nav-icon cil-search"></i> Search
          </a>
        </li>

        <li class="nav-title">Data</li>
        <li class="nav-item">
          <a class="nav-link" href="{{ url_for('main.exports_page') }}">
            <i class="nav-icon cil-cloud-download"></i> Export / Download CSV
          </a>
        </li>

        <li class="nav-title">Utilities</li>
        <li class="nav-item">
          <a class="nav-link" href="{{ url_for('main.point_inputs') }}">
            <i class="nav-icon cil-check-alt"></i> System Health
          </a>
        </li>
        {% endblock %}
      </ul>

      <button class="sidebar-toggler" type="button" data-coreui-toggle="unfoldable"></button>
    </div>

    <div class="wrapper d-flex flex-column min-vh-100 bg-light">
      <header class="header header-sticky mb-4">
        <div class="container-fluid">
          <button class="header-toggler px-md-0 me-md-3" type="button" onclick="coreui.Sidebar.getInstance(document.querySelector('#sidebar')).toggle()">
            <i class="icon icon-lg cil-menu"></i>
          </button>
          <a class="header-brand d-md-none" href="{{ url_for('main.menu') }}">AMS</a>

          <ul class="header-nav ms-auto">
            {% block header_actions %}
            <li class="nav-item">
              <a class="nav-link" href="{{ url_for('main.menu') }}">
                <i class="icon cil-home"></i>
              </a>
            </li>
            <li class="nav-item">
              <button class="btn btn-sm btn-outline-secondary" id="themeToggle" type="button" title="Toggle theme">
                <i class="icon cil-contrast"></i>
              </button>
            </li>
            {% endblock %}
          </ul>
        </div>

        <div class="header-divider"></div>

        <div class="container-fluid">
          <nav aria-label="breadcrumb">
            <ol class="breadcrumb my-0">
              {% block breadcrumbs %}
              <li class="breadcrumb-item"><a href="{{ url_for('main.menu') }}">Home</a></li>
              <li class="breadcrumb-item active"><span>{{ title or "Page" }}</span></li>
{% endblock %}
            </ol>
          </nav>
        </div>
      </header>

      <div class="body flex-grow-1 px-3">
        <div class="container-lg">
          {% block content %}{% endblock %}
        </div>
      </div>

      <footer class="footer">
        <div class="container-fluid">
          <span>&copy; {{ 2025 }} AMS</span>
        </div>
      </footer>
    </div>

    {# CoreUI JS #}
    <script src="https://cdn.jsdelivr.net/npm/@coreui/coreui@5.0.0/dist/js/coreui.bundle.min.js"></script>
    
    {% block datatables_js %}{% endblock %}
    {% block dt_export_engines %}{% endblock %}

    {% block scripts %}{% endblock %}
  </body>
</html>
